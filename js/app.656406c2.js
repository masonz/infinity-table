(function(t){function e(e){for(var o,s,l=e[0],a=e[1],d=e[2],f=0,u=[];f<l.length;f++)s=l[f],n[s]&&u.push(n[s][0]),n[s]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o]);c&&c(e);while(u.length)u.shift()();return r.push.apply(r,d||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],o=!0,l=1;l<i.length;l++){var a=i[l];0!==n[a]&&(o=!1)}o&&(r.splice(e--,1),t=s(s.s=i[0]))}return t}var o={},n={app:0},r=[];function s(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=o,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var c=a;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"034f":function(t,e,i){"use strict";var o=i("c21b"),n=i.n(o);n.a},"754d":function(t,e,i){"use strict";var o=i("d99b"),n=i.n(o);n.a},c21b:function(t,e,i){},cd49:function(t,e,i){"use strict";i.r(e);var o=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",[t._v("\n    row: "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],domProps:{value:t.count},on:{input:function(e){e.target.composing||(t.count=e.target.value)}}}),i("button",{on:{click:t.generateData}},[t._v("apply")])]),i("infinity-table",{ref:"table",staticStyle:{margin:"50px 100px"},attrs:{data:t.data,"column-defs":t.columnDefs,height:650,hover:"",summary:""},scopedSlots:t._u([{key:"id",fn:function(e){return[i("span",{staticClass:"clickable",on:{click:function(i){t.onClick("点击了学号"+e.row.id)}}},[t._v("\n        "+t._s(e.row.id)+"\n      ")])]}},{key:"operation",fn:function(e){return[i("div",[i("span",{staticClass:"clickable",on:{click:function(i){t.onClick("查看"+e.row.name)}}},[t._v("\n          查看\n        ")]),i("span",{staticClass:"clickable",on:{click:function(i){t.onClick("编辑"+e.row.name)}}},[t._v("\n          编辑\n        ")])])]}}])},[i("div",{attrs:{slot:"empty"},slot:"empty"},[t._v("没有数据")])])],1)},r=[],s=i("9ab4"),l=i("60a3"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"infinity-table-wrapper"},[i("div",{staticClass:"infinity-table infinity-table--border",style:{height:t.height+"px"}},[i("div",{ref:"thead",staticClass:"infinity-table__header"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showLeftFixed,expression:"showLeftFixed"}],ref:"theadLeft",staticClass:"table__header-left"},[i("div",{staticClass:"infinity-table__row"},t._l(t.leftColumnDefs,function(e,o){return i("div",{key:"column_header-fixLeft-"+o,staticClass:"infinity-table__cell header-label",style:e.$style},[i("span",[t._v(t._s(e.title))])])}))]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showRightFixed,expression:"showRightFixed"}],ref:"theadRight",staticClass:"table__header-right"},[i("div",{staticClass:"infinity-table__row"},t._l(t.rightColumnDefs,function(e,o){return i("div",{key:"column_header-fixRight-"+o,staticClass:"infinity-table__cell header-label",style:e.$style},[i("span",[t._v(t._s(e.title))])])}))]),i("div",{ref:"theadMiddleWrapper",staticClass:"table__header-middle-wrapper"},[i("div",{ref:"theadMiddle",staticClass:"table__header-middle"},[i("div",{staticClass:"infinity-table__row"},t._l(t.columns,function(e,o){return i("div",{key:"column_header-"+o,staticClass:"infinity-table__cell header-label",style:e.$style},[i("span",[t._v(t._s(e.title))])])}))])])]),i("div",{ref:"tbody",staticClass:"infinity-table__body"},[i("div",{ref:"tbodyLeft",staticClass:"table__body-left"},[i("div",{ref:"tbodyLeftScroll",staticClass:"table__body-container"},[i("div",{ref:"tbodyLeftView",staticClass:"table__body-leftview"},t._l(t.rowData,function(e){return i("div",{key:"tbody_left-row"+e.$index,staticClass:"infinity-table__row",class:{hover:t.hoverIndex===e.$index},style:e.$style,on:{mouseenter:function(i){t.onMouseEnter(e.$index)},mouseleave:t.onMouseLeave}},t._l(t.leftColumnDefs,function(o,n){return i("div",{key:"column_cell-"+n,staticClass:"infinity-table__cell",style:o.$style},[o.slot?t._t(o.filed,null,{row:e}):i("span",{attrs:{title:e[o.filed]}},[t._v("\n                  "+t._s(e[o.filed])+"\n                ")])],2)}))}))])]),i("div",{ref:"tbodyRight",staticClass:"table__body-right"},[i("div",{ref:"tbodyRightScroll",staticClass:"table__body-container"},[i("div",{ref:"tbodyRightView",staticClass:"tbody__body-rightview"},t._l(t.rowData,function(e){return i("div",{key:"tbody_right-row"+e.$index,staticClass:"infinity-table__row",class:{hover:t.hoverIndex===e.$index},style:e.$style,on:{mouseenter:function(i){t.onMouseEnter(e.$index)},mouseleave:t.onMouseLeave}},t._l(t.rightColumnDefs,function(o,n){return i("div",{key:"column_cell-"+n,staticClass:"infinity-table__cell",style:o.$style},[o.slot?t._t(o.filed,null,{row:e}):i("span",{attrs:{title:e[o.filed]}},[t._v("\n                  "+t._s(e[o.filed])+"\n                ")])],2)}))}))])]),i("div",{ref:"tbodyMiddle",staticClass:"table__body-middle"},[i("div",{ref:"tbodyMiddleScroll",staticClass:"table__body-scrollview"},[t.data.length?i("div",{staticClass:"table__body-container",style:{height:t.viewHeight+"px"}},t._l(t.rowData,function(e){return i("div",{key:"row_"+e.$index,staticClass:"infinity-table__row",class:{hover:t.hoverIndex===e.$index},style:e.$style,on:{mouseenter:function(i){t.onMouseEnter(e.$index)},mouseleave:t.onMouseLeave}},t._l(t.columns,function(o,n){return i("div",{key:"column_cell-"+n,staticClass:"infinity-table__cell",style:o.$style},[o.slot?t._t(o.filed,null,{row:e}):i("span",{attrs:{title:e[o.filed]}},[t._v("\n                  "+t._s(e[o.filed])+"\n                ")])],2)}))})):i("div",{ref:"emptyContainer",staticClass:"empty-container"},[t.$slots.empty?t._e():i("div",[t._v(t._s(t.emptyText))]),t._t("empty")],2)])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showSummary,expression:"showSummary"}],ref:"tfoot",staticClass:"infinity-table__footer"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showLeftFixed,expression:"showLeftFixed"}],ref:"tfootLeft",staticClass:"table__footer-left"},[i("div",{staticClass:"infinity-table__row"},t._l(t.leftColumnDefs,function(e,o){return i("div",{key:"column_header-fixLeft-"+o,staticClass:"infinity-table__cell",style:e.$style},[i("span",[t._v(t._s(t.summaryData[e.filed]))])])}))]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showRightFixed,expression:"showRightFixed"}],ref:"tfootRight",staticClass:"table__footer-right"},[i("div",{staticClass:"infinity-table__row"},t._l(t.rightColumnDefs,function(e,o){return i("div",{key:"column_header-fixRight-"+o,staticClass:"infinity-table__cell",style:e.$style},[i("span",[t._v(t._s(t.summaryData[e.filed]))])])}))]),i("div",{ref:"tfootMiddleWrapper",staticClass:"table__footer-middle-wrapper"},[i("div",{ref:"tfootMiddle",staticClass:"table__footer-middle"},[i("div",{staticClass:"infinity-table__row"},t._l(t.columns,function(e,o){return i("div",{key:"column_footer-"+o,staticClass:"infinity-table__cell",style:e.$style},[i("span",[t._v(t._s(t.summaryData[e.filed]))])])}))])])])])])},d=[],c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rowData=[],e.visibleCount=0,e.hoverIndex=null,e.recordScrollTop=0,e.recordScrollLeft=0,e.loop=0,e.timer=0,e.summaryData={},e}return s["c"](e,t),Object.defineProperty(e.prototype,"columns",{get:function(){var t=this;return this.columnDefs.filter(function(t){return!t.fixed}).map(function(e){return s["a"]({},e,{$style:{flex:"1 0 "+(e.width||t.defaultWidth)+"px",width:(e.width||t.defaultWidth)+"px"}})})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnsWidth",{get:function(){var t=this;return this.columns.map(function(e){return e.width||t.defaultWidth}).reduce(function(t,e){return t+e},0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showLeftFixed",{get:function(){return Boolean(this.leftColumnDefs.length)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftColumnDefs",{get:function(){var t=this;return this.columnDefs.filter(function(t){return t.fixed&&"left"===t.fixed}).map(function(e){return s["a"]({},e,{$style:{flex:"1 0 "+(e.width||t.defaultWidth)+"px",width:(e.width||t.defaultWidth)+"px"}})})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colFixedLeftWidth",{get:function(){var t=this;return this.leftColumnDefs.map(function(e){return e.width||t.defaultWidth}).reduce(function(t,e){return t+e},"0")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showRightFixed",{get:function(){return Boolean(this.rightColumnDefs.length)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightColumnDefs",{get:function(){var t=this;return this.columnDefs.filter(function(t){return t.fixed&&"right"===t.fixed}).map(function(e){return s["a"]({},e,{$style:{flex:"1 0 "+(e.width||t.defaultWidth)+"px",width:(e.width||t.defaultWidth)+"px"}})})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colFixedRightWidth",{get:function(){var t=this;return this.rightColumnDefs.map(function(e){return e.width||t.defaultWidth}).reduce(function(t,e){return t+e},0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewHeight",{get:function(){return this.data.length*this.rowHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSummary",{get:function(){return!1!==this.summary},enumerable:!0,configurable:!0}),e.prototype.mounted=function(){this.renderTable()},e.prototype.renderTable=function(){var t=this;this.$nextTick(function(){t.getVisibleRowCount(),t.calculateTotal(),t.updateRenderRowIndex(),t.setBodyStyle(),t.setEmptyStyle(),t.setSpacing(),t.setScrollListener()})},e.prototype.setSpacing=function(){var t=this;setTimeout(function(){var e=t.$refs,i=e.tbodyLeft,o=e.tbodyMiddle,n=e.tbodyRight,r=o.offsetHeight,s=o.clientHeight;i.style.marginBottom=r-s+"px",n.style.marginBottom=r-s+"px";var l=t.$refs,a=l.thead,d=l.tbody,c=l.tfoot,f=d.offsetWidth-d.clientWidth;a.style.paddingRight=f+"px",c.style.paddingRight=f+"px"},0)},e.prototype.setEmptyStyle=function(){this.$refs.emptyContainer&&(this.$refs.emptyContainer.style.minWidth=this.columnsWidth+"px")},e.prototype.setBodyStyle=function(){var t=this.$refs,e=t.thead,i=t.tbody,o=t.tfoot,n=this.$refs,r=n.tbodyLeft,s=n.tbodyRight,l=this.$refs,a=l.tbodyLeftView,d=l.tbodyRightView;i.style.overflowY=this.data.length?"auto":"hidden",i.scrollTop=0,a.style.width=this.colFixedLeftWidth+"px",a.style.height=this.viewHeight+"px",d.style.width=this.colFixedRightWidth+"px",d.style.height=this.viewHeight+"px",i.style.height=this.height-e.clientHeight+"px",i.style.height=i.clientHeight-o.clientHeight+"px",i.style.top=e?e.clientHeight+"px":"0",r.style.height=this.data.length?"auto":"100%",s.style.height=this.data.length?"auto":"100%",this.showLeftFixed?r.classList.add("border"):r.classList.remove("border"),this.showRightFixed?s.classList.add("border"):s.classList.remove("border"),this.renderHorizontalScrollbar(),this.setFixedStyle()},e.prototype.onMouseEnter=function(t){!1!==this.hover&&(this.hoverIndex=t)},e.prototype.onMouseLeave=function(){!1!==this.hover&&(this.hoverIndex=null)},e.prototype.getVisibleRowCount=function(){var t=this.$refs.thead,e=this.$el.clientHeight-t.clientHeight,i=e/this.rowHeight;this.visibleCount=Math.ceil(i)||this.data.length},e.prototype.setScrollListener=function(){var t=this;this.$refs.tbody.onscroll=function(e){t.$refs.tbodyMiddle.style.height="auto",requestAnimationFrame(t.onVerticalScroll)},this.$refs.tbodyMiddle.onscroll=function(e){requestAnimationFrame(t.onHorizontalScroll)}},e.prototype.onVerticalScroll=function(){var t=this.$refs.tbody.scrollTop;t!==this.recordScrollTop&&(this.recordScrollTop=t,this.updateRenderRowIndex(),this.renderHorizontalScrollbar())},e.prototype.onHorizontalScroll=function(){var t=this.$refs,e=t.theadMiddle,i=t.tfootMiddle,o=t.tbodyMiddle,n=o.scrollLeft;n!==this.recordScrollLeft&&(this.recordScrollLeft=n,e.style.transform="translate3d(-"+n+"px, 0, 0)",i.style.transform="translate3d(-"+n+"px, 0, 0)",this.setFixedStyle())},e.prototype.renderHorizontalScrollbar=function(){var t=this.$refs,e=t.tbodyMiddle,i=t.tbody,o=this.$refs.tbody.scrollTop;window.clearTimeout(this.timer),this.timer=window.setTimeout(function(){e.style.height=i.clientHeight+o+"px"},500)},e.prototype.setFixedStyle=function(){var t=this.$refs,e=t.theadLeft,i=t.theadRight,o=this.$refs,n=o.tfootLeft,r=o.tfootRight,s=this.$refs,l=s.tbodyLeft,a=s.tbodyRight,d=s.tbodyMiddle,c=d.scrollLeft;c>0?(e.classList.add("scrolling"),n.classList.add("scrolling"),l.classList.add("scrolling")):(e.classList.remove("scrolling"),n.classList.remove("scrolling"),l.classList.remove("scrolling")),c+d.clientWidth<d.scrollWidth?(i.classList.add("scrolling"),a.classList.add("scrolling"),r.classList.add("scrolling")):(i.classList.remove("scrolling"),a.classList.remove("scrolling"),r.classList.remove("scrolling"))},e.prototype.updateRenderRowIndex=function(){this.rowData=[];for(var t=Math.floor(this.recordScrollTop/this.rowHeight),e=t+this.visibleCount,i=t;i<=e;i++)if(this.data[i]){var o=i*this.rowHeight;this.rowData.push(Object.freeze(s["a"]({},this.data[i],{$index:i,$style:{transform:"translate3d(0, "+o+"px ,0)"}})))}},e.prototype.calculateTotal=function(){var t=this;this.columnDefs.map(function(e){if(void 0!==e.summary)t.$set(t.summaryData,e.filed,e.summary);else{var i=t.data.map(function(t){return t[e.filed]}).reduce(function(t,e){return parseFloat(t)+parseFloat(e)},0),o=isNaN(i)||!t.data.length?"N/A":i.toFixed(2);t.$set(t.summaryData,e.filed,o)}})},s["b"]([Object(l["b"])({default:600})],e.prototype,"height",void 0),s["b"]([Object(l["b"])({default:function(){return[]}})],e.prototype,"data",void 0),s["b"]([Object(l["b"])({required:!0})],e.prototype,"columnDefs",void 0),s["b"]([Object(l["b"])({default:38})],e.prototype,"rowHeight",void 0),s["b"]([Object(l["b"])({default:100})],e.prototype,"defaultWidth",void 0),s["b"]([Object(l["b"])({default:!1})],e.prototype,"hover",void 0),s["b"]([Object(l["b"])({default:!1})],e.prototype,"summary",void 0),s["b"]([Object(l["b"])({default:"暂无数据"})],e.prototype,"emptyText",void 0),e=s["b"]([l["a"]],e),e}(l["c"]),f=c,u=f,h=(i("754d"),i("2877")),p=Object(h["a"])(u,a,d,!1,null,null,null);p.options.__file="InfinityTable.vue";var y=p.exports,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=[],e.count=1e3,e}return s["c"](e,t),Object.defineProperty(e.prototype,"columnDefs",{get:function(){var t=this,e=[],i=Object.keys(this.subjectKeyMaps);return i.forEach(function(o,n){var r={filed:o,title:t.subjectKeyMaps[o],width:100+10*n,fixed:"",slot:!1};n<=0&&(r.width="",r.slot=!0,r.fixed="left",r.summary="总计"),"school"===o&&(r.fixed="right"),n===i.length-1&&(r.width="",r.slot=!0,r.fixed="right"),e.push(r)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subjectKeyMaps",{get:function(){return{id:"学号",name:"姓名",chinese:"语文",math:"数学",english:"英语",physics:"物理",chemistry:"化学",computer:"计算机",school:"学校",operation:"操作"}},enumerable:!0,configurable:!0}),e.prototype.mounted=function(){this.generateData()},e.prototype.onClick=function(t){alert(t)},e.prototype.generateData=function(){for(var t=[],e=1;e<=this.count;e++)t.push({id:e,name:"学生"+e,chinese:""+this.randomGrade(),math:""+this.randomGrade(),english:""+this.randomGrade(),physics:""+this.randomGrade(),chemistry:""+this.randomGrade(),computer:""+this.randomGrade(),school:"第"+e+"中学",operation:""});this.data=Object.freeze(t),this.$refs.table.renderTable()},e.prototype.randomGrade=function(){return(100*Math.random()).toFixed(2)},e=s["b"]([Object(l["a"])({components:{InfinityTable:y}})],e),e}(l["c"]),m=b,v=m,_=(i("034f"),Object(h["a"])(v,n,r,!1,null,null,null));_.options.__file="App.vue";var g=_.exports;o["default"].config.productionTip=!1,new o["default"]({render:function(t){return t(g)}}).$mount("#app")},d99b:function(t,e,i){}});
//# sourceMappingURL=app.656406c2.js.map